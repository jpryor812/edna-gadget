<script src="https://edna-fork--development.gadget.app/api/client/web.min.js" defer="defer"></script>
<script src="{{ 'purify.min.js' | asset_url }}" defer="defer"></script>
{{ 'chatbot.js' | asset_url | script_tag }}
{{ 'chatbot.css' | asset_url | stylesheet_tag }}

<!-- Edna Chatbot Button (stays in section) -->
<!-- Edna Chatbot Button (stays in section) -->
<div id="chatbot-toggle" class="compact-style-button" style="background-color: {{ section.settings.button_background }};">
  <div class="button-icon">
    {% if section.settings.button_icon %}
      <img id="chatbot-open-toggle" src="{{ section.settings.button_icon | img_url: 'small' }}" alt="Edna" loading="lazy">
    {% else %}
      <img id="chatbot-open-toggle" src="{{ 'edna_logo.png' | asset_url }}" alt="Edna" loading="lazy">
    {% endif %}
    <img id="chatbot-close-toggle" class="hidden" src="{{ 'close.png' | asset_url }}" loading="eager">
  </div>
  <span class="button-text">{{ section.settings.button_text | default: "Shop with Edna" }}</span>
</div>

<!-- Chat window will be moved to body via JS -->
<div id="chatbot-window">
  <div id="chat-header">
    <h2>Edna</h2>
    <button id="chatbot-window-close" class="close-window-button">Ã—</button>
  </div>
  <div id="chat">
    <!-- Welcome message will be added by JS -->
  </div>
  <form id="chat-form">
    <input name="chatInput" autocomplete="off" placeholder="{{ section.settings.input_placeholder | default: 'Ask me something...' }}"/>
    <button name="chatButton" type="submit">Send</button>
  </form>
</div>

{% schema %}
{
  "name": "Shop with Edna",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Shop with Edna"
    },
    {
      "type": "image_picker",
      "id": "button_icon",
      "label": "Button icon (optional)"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background color",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "input_placeholder",
      "label": "Chat input placeholder",
      "default": "Ask me something..."
    }
  ]
}
{% endschema %}